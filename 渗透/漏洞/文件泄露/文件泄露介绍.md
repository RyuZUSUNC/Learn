# 漏洞成因
在一些小型企业，可能公司并没有专门的服务器，而是把网站部署在某一个虚拟主机上面，代码文件比较多的时候 FTP 上传是比较慢的，于是开发者把代码先打包压缩后再上传，上传成功后再去服务器解压，这有虽然解决了上传速度慢的问题，不过却留下了一些安全隐患。

压缩包解压后如果没有删除，当攻击者发现后就可以把代码压缩包下载；因为部署到服务器上的都是源代码，这个时候攻击者就可以通过代码进一步挖掘一些安全漏洞：文件上传，SQL 注射等。

由于运维人员的水平参差不齐，还有就是是人就有犯错的时候，所以经常会出现不必要的失误导致的安全隐患，所以这里就未大家盘点一下经常出现的由于运维人员是失误造成的安全隐患。

# 目录浏览
由于发布网站时，服务器配置问题，导致目录浏览功能打开，在目录下不存在默认首页的情况下可以浏览目录下的文件目录，从而引起信息泄露，造成安全隐患。

例子：

![1](\img\1057995971.jpg)

# 错误回显
由于服务配置了错误回显，导致代码在执行错误的情况下爆出详细信息，可能泄漏服务器的真实路径，造成安全隐患。

例子：

![1](\img\346848972.jpg)

# GIT 源码泄露
## 成因
当在一个空目录执行 git init 时，Git 会创建一个 .git 目录。 这个目录包含所有的 Git 存储和操作的对象。 如果想备份或复制一个版本库，只需把这个目录拷贝至另一处就可以了。

## .git文件夹
- config 文件包含项目特有的配置选项；

- info 目录包含一个全局性排除（global exclude）文件，用以放置不希望被记录在 .gitignore 文件中的忽略模式（ignored patterns）；

- hooks 目录包含客户端或服务端的钩子脚本（hook scripts）。

重要：

- HEAD 文件指示目前被检出的分支；

- index 文件保存暂存区信息；

- objects 目录存储所有数据内容；

- refs 目录存储指向数据（分支）的提交对象的指针。

在发布代码的时候，如果没有把 .git 这个目录删除，直接发布到了运行目录中。攻击者就可以通过这个文件夹，可以用来恢复源代码。

通常会用到的利用工具 **GitHack** 

    GitHack.py    http://www.localhost.test/.git/

# SVN 导致文件泄露
## 成因
SVN 是 Subversion 的简称，是一个开放源代码的版本控制系统，相较于 RCS、CVS，它采用了分支管理系统，它的设计目标就是取代 CVS。互联网上很多版本控制服务已从 CVS 迁移到 Subversion。

svn 文件是 subversion 的版本控制信息文件 当某个目录处于 subversion 的版本控制时，在这个目录中就会 .svn 这个文件夹，这个 .svn 文件夹中的文件就是一些版本信息文件，供 subversion 使用。由于部署上线的时候没有删除这个文件夹，导致代码泄漏。攻击者可以使用工具 dvcs-ripper 下载网站源码。

**dvcs-ripper**

    https://github.com/kost/dvcs-ripper。

**利用命令**

    rip-svn.pl -v -u http://www.localhost.test/.svn/

# DS_Store 文件泄露
DS_Store 是用来存储这个文件夹的显示属性的：比如文件图标的摆放位置。这个文件可以删除，删除以后的副作用就是这些信息的失去。（当然，这点副作用其实不是太大）。在和别人交换文件应该把 .DS_Store 文件删除比较妥当，因为里面包含了一些你不一定希望别人看见的信息（尤其是网站，通过 .DS_Store 可以知道这个目录里面所有文件的清单，很多时候这是一个不希望出现的问题）。由于代码在部署上线的时候没有删除这个文件，导致不必要的信息泄漏。

**利用工具**

    https://github.com/lijiejie/ds_store_exp

# 备份文件
在网站的使用过程中，往往需要对网站中的文件进行修改、升级。此时就需要对网站整站或者其中某一页面进行备份。当备份文件或者修改过程中的缓存文件因为各种原因而被留在网站 web 目录下，而该目录又没有设置访问权限时，便有可能导致备份文件或者编辑器的缓存文件被下载，导致敏感信息泄露，给服务器的安全埋下隐患。

该漏洞的成因主要有以下两种：

1. 服务器管理员错误地将网站或者网页的备份文件放置到服务器 web 目录下。

2. 编辑器在使用过程中自动保存的备份文件或者临时文件因为各种原因没有被删除而保存在 web 目录下。

**利用方式：**

扫描到备份文件直接下载即可

# WEB-INF泄露
WEB-INF 是 Java 的 WEB 应用的安全目录。如果想在页面中直接访问其中的文件，必须通过 web.xml 文件对要访问的文件进行相应映射才能访问。

WEB-INF 主要包含一下文件或目录：

- /WEB-INF/web.xml：Web 应用程序配置文件，描述了 servlet 和其他的应用组件配置及命名规则；

- /WEB-INF/classes/：含了站点所有用的 class 文件，包括 servlet class 和非 servlet class，他们不能包含在 .jar 文件中；

- /WEB-INF/lib/：存放 web 应用需要的各种 JAR 文件，放置仅在这个应用中要求使用的 jar 文件 , 如数据库驱动 jar 文件；

- /WEB-INF/src/：源码目录，按照包名结构放置各个 java 文件；

- /WEB-INF/database.properties：数据库配置文件。

不过在一些特定的场合却会让攻击者能读取到其中的内容，从而造成源码泄露。

## 成因

通常一些web应用我们会使用多个 web 服务器搭配使用，解决其中的一个 web 服务器的性能缺陷以及做均衡负载的优点和完成一些分层结构的安全策略等。在使用这种架构的时候，由于对静态资源的目录或文件的映射配置不当，可能会引发一些的安全问题，导致 web.xml 等文件能够被读取。

**利用方式**

浏览器直接读取即可

# 测试文件
运维人员在部署新的应用或者配置新的服务器时会使用一些测试文件对服务器进行测试，然而在测试后未能及时删除就出现了这种问题。

## phpinfo
在安装完 php 环境之后，正常情况下都会创建一个代码为 `<?php phpinfo(); ?>` 的文件，查看系统的配置情况，有的时候在上线部署的时候没有删除该文件导致信息泄漏。

# 管理后台
管理后台页面是网站管理员用于对网站的增删改查用的，一旦被别有用心的人进入，那后果可想而知，如果泄漏了登录路径，黑客可以通过sql注入、爆破、钓鱼等方式获取密码进入后台。

弱文件扫描器

    https://github.com/ring04h/weakfilescan

**修补方案**

1. 删除以上存在的泄漏的目录
2. 后台路径尽量复杂，不要被随便扫描出来
3. 修改服务器配置禁止列目录
4. 修改服务器配置禁止错误回显
5. 删除没用的文件