# JVM内存最好不要超过32G

- 触发JVM的临界值，优化策略Compressed OOPS失效（之前Heap Size在[4G~32G]区间内采用此优化）
- 由于优化策略失效，同时堆内存>32G，所以JVM被迫使用8字节（64位）来对Java对象寻址（之前4字节（32位）就够了）
- 通常64位JVM消耗的内存会比32位的大1.5倍，这是因为对象指针在64位架构下，长度会翻倍（事实上当内存到达40-50GB的时候，有效内存才相当于使用Compressed OOPS技术时候的32G内存）
- 更大的指针在主内存和缓存器（例如LLC, L1等）之间移动数据的时候，会占用更多的带宽
- 让JVM的GC面临更大压力的指针对象（在实际应用中构建大于12-16G的堆时，若无很好的性能调优与测评，你很容易就会引起一个耗时数分钟的完全GC）

目前的路线图是Java 25会增加对Uncompressed Oops的支持,实现大于32GB堆的能力,但是这需要JVM和应用程序代码级别的重大改变。

- 多数应用只需要设置小于10G的堆内存就可以获得最佳性能。
- 可以通过多JVM运行并分配内存来提高内存可用量,而不是依赖单个超大堆。

