# 第一章

MIPS 每秒执行多少10^6的指令

CPI计算

1. 冯诺依曼计算机结构特点

使用“存储程序”工作方式

计算机由`运算器`,`控制器`,`存储器`,`输入设备`和`输出设备`5个基本部件组成

存储器不仅能存放数据,而且也能存放指令

2. 计算机的硬件组成
3. 计算机的工作过程
4. 计算机系统的层次结构

```
    应用(问题)
    算法
    编程(语言)
    操作系统/虚拟机
    指令集体系结构(ISA)
    微体系结构
    功能部件/RTL
    电路
    器件
```

5. 计算机系统基本性能指标及性能评估

`IPS(Instructions Per Second)`: 每秒执行多少条指令  IPS = 主频(时钟频率)/平均CPI

`MIPS`: 平均每秒执行多少百万条(10^6)指令

# 第二章

补码计算

移码计算 补码符号位取反

IEEE754计算

```
机器数 C0 A0 00 00H 转换为 IEEE754单精度浮点数

1. 转换为二进制表示 1100 0000 1010 0000 0000 0000 0000 0000
2. 取出各位 1 10000001 010000000000000000000000
3. 计算阶码 10000001 转为十进制 129 - 127 = 2
4. 取出尾数转为十进制计算 0.01B = 0.25
5. 最终值为 -1 * 1.25 * 2 ^ 2 = -5.0
```

大端:  0800H-01 0801H-23 0802H-45 0803H-67
小端:  0800H-67 0801H-45 0802H-23 0803H-01

数值表示范围

字符编码

奇偶校验

进制转换

原码，反码，补码

# 第三章

指令地址

寻址方式: 直接寻址,间接寻址,寄存器寻址,寄存器间接寻址,立即寻址,基址寻址,变址寻址,相对寻址

`直接寻址`: 指令字中的形式地址A就是操作数的真实地址EA 
- 优点: 简单指令执行阶段仅访问一次主存不需要专门计算操作数的地址
- 缺点: A的位数决定了该指令的操作数的寻址范围,操作数的地址不易修改

`间接寻址`: 指定地址字段给出的形式地址不是操作数的真正地址,而是操作数有效地址所在的存储单位的地址,也就是操作数地址的地址,即EA=(A)
- 优点: 可扩大寻址范围,便于编制程序
- 缺点: 指令在执行阶段要多次访存

`寄存器寻址`: 在指令字中直接给出操作数所在的寄存器编号,即EA=Ri,其操作数在由Ri所指的寄存器内
- 优点: 在执行阶段不访问主存,之访问寄存器,指令字短且执行速度快,支持向量/矩阵运算
- 缺点: 寄存器价格昂贵,寄存器个数有限

`寄存器间接寻址`: 寄存器Ri中给出的不是一个操作数,而是操作数所在主存单元的地址,即EA=(Ri)
- 优点: 比一般的间接寻址快

`立即寻址`: 形式地址A就是操作数本身,又称为立即数,一般采用补码形式 `#` 表示立即寻址特征
- 优点: 指令执行阶段不访问主存,指令执行时间最短
- 缺点: A的位数限制了立即数的范围,如A的位数为n,且立即数采用补码时,克表示的数据范围为 (-2^n-1)~(2^n-1)-1

**偏移寻址**

以某个地址作为起点,形式地址视为"偏移量"

`基址寻址`: 以程序的起始存放地址作为"起点"
`变址寻址`: 程序员自己决定从哪里作为"起点"
`相对寻址`: 以程序计数器PC所指地址作为"起点"

指令集和汇编语言

指令系统设计风格

CISC/RISC 特点

- CISC(复杂指令集计算机Complex Instruction Set Computer)
  - 指令系统复杂: 指令多,寻址方式多,指令格式多
  - 指令周期长: 大多数指令需要多个时钟周期才能完成
  - 采用微程序控制: 由于有些指令非常复杂,以至于无法用硬连线控制器来实现,而微程序控制器用软件设计思想实现硬件,可以实现对复杂指令的控制
  - 难以进行编译优化: 由于编译器可选指令序列增多,使目标代码组合增加,从而增加了目标代码优化的难度

- RISC(精简指令集计算机Reduced Instruction Set Computer)
  - 指令条目少: 只包含使用频度高的指令
  - 指令格式规整: 寻址方式少,指令格式少,指令长度一致
  - 采用load/store型指令设计风格
  - 采用流水线方式执行指令: 规整的指令格式有利于采用流水线方式执行,除了Load/Store指令外,其他指令都只需一个或小于一个时钟周期就可以完成,指令周期短
  - 采用大量通用寄存器: 编译器可将变量分配到寄存器中,以减少访存次数
  - 采用硬连线控制器: 指令少而规整使得控制器的实现变得简答,可以不用或少用微程序控制
  - 采用优化的编译系统: 指令数少有利于编译器的优化

循环结构和选择结构的机器代码表示

# 第四章

程序执行概述

CPU基本功能与组成

CPU的基本职能: 就是周而复始的执行指令,机器指令执行过程中的全部操作都是由CPU中的控制器控制执行的

CPU最基本部件: 数据通路(datapath)和控制部件(control unit)

1. `程序计数器(PC)`: PC又称指令计数器或指令指针寄存器(IP),用来存放即将执行指令的地址
2. `指令寄存器(IR)`: IR用以存放现行指令
3. `指令译码器(ID)`: 指令译码器对指令寄存器中的操作码部分进行分析解释,产生相应的译码信号提供给操作控制信号形成部件,以产生控制信号
4. `启停控制逻辑`: 启停控制逻辑控制时序型号的发生与停止,并实现对机器的启动与停机

5. `时序信号产生部件`: 该部件以时钟脉冲为基础,产生不同指令对应的周期,节拍,工作脉冲等时序信号,实现机器指令执行过程的时序控制
6. `操作控制信号形成部件`: 该部件综合时序信号,指令译码信号和执行部件反馈的条件标志(如 CF,SF,OF等),形成不同指令的操作所需要的控制信号
7. `总线控制逻辑`: 实现对总线传输的控制,包括对数据和地址信息的缓冲与控制,其中包括用来缓存数据信息的存储器数据寄存器MDR和用来缓存地址信息的存储器地址寄存器MAR.CPU对于存储器的访问通过总线进行,CPU将存储访问命令(即读写控制信号)送到控制线,将要访问的存储单元地址送到地址线,并通过数据线取指令或者与存储器交换数据信息
8. `中断机构`: 实现对异常情况和外部中断请求的处理 

异常和中断

`异常控制(中断机制)`: CPU除了能正常执行指令以外,还必须具有程序正常执行被打断时的处理机制
`中断机构`: CPU中相应的异常和中断处理逻辑

`异常`: 异常指是由CPU内部的异常引起的意外事件

  1. 硬故障中断是由于硬连线路出现异常而引起的,如电源掉电,校验线路错等
  2. 程序性异常是由CPU执行某条指令而引起的发生在CPU内部的异常事件.如除数为0,溢出,断点,单步跟踪寻址错,访问超市,非法操作码,栈溢出,缺页,地址越界(段错误)等

`中断`: 程序执行过程中,若外设完成任务或发生某些特殊事件,设备控制器会向CPU发中断请求,要求CPU对这些情况进行处理.这类事件与执行的指令无关,由CPU外部的I/O硬件发出,所以,称为I/O中断或外部中断,需要通过外部中断请求线向CPU请求

数据通路基本工作原理

`数据通路`: 指令执行过程中数据所经过的路径,包括路径上的部件
`执行部件或功能部件`: 数据通路中专门进行数据运算的部件

流水线执行与流水线冒险

控制器设计

# 第五章

存储器概述分类

存储器组成和基本操作

RAM芯片

存储芯片的扩展

连续编址与交叉编址

Cache

Cache和主存之间的映射

# 第六章

输入输出设备

外设与CPU，主存的互连

I/O接口

中断控制

DMA控制

