# 自由软件的含义
- 研究程序运行机制，源代码公开并根据用户自己的需求修改他的自由
- 重新分发复制份，以使其他人能够共享软件的自由
- 改进程序，为使他人受益而散发他的自由

简而言之就是，用户有运行，复制，研究，改进软件的自由

# GPL 协议
GPL保证任何人有共享和修改自由软件的自由。

# linux的发展史
- 创始人： Linus Torvalds
- 第一个公开发行版本的日期 ：1991年底

# 内核
- 概念 ：内核是linux的主体，内核负责控制硬件设备，文件系统，进程调度以及其他工作
- 版本号 
    - 内核版本
        ```
        由三个数字组成r.x.y
        r：目前发布的Kernel主版本
        x：偶数是稳定版本，奇数是开发中版本
        y：错误修补次数

        红帽5内核版本是 2.6.18
        ```
    - 发行套件版本
        ```
        厂商自己定义
        ```
# 特点
- 开放性
    - 遵循OSI国际保准，兼容性好
- 多用户
    - 不同用户使用，每个用户对自己的资源都有特定的权限，互不影响
- 多任务
    - 计算机能同时指向多个任务而且各个程序的运行相互独立
- 良好的用户界面
    - 两种界面，用户界面和系统调用
- 设备独立性
    - 把所有外部设备统一当做文件对待
- 提供了丰富的网络功能
    - 优于其他操作系统
- 可靠的系统安全性
    - 采取了多重安全措施，包括对设备和文件的读写控制，带保护的子系统，审计跟踪，核心授权等
- 良好的移植性
    - 可移植，能在任何环境和任何平台上运行
- 兼容其他UNIX系统
    - 遵循POSIX标准
- 支持多种文件系统
    - 可以将多种不同的文件系统以挂载的方式加入

# 安装方式
- 字符界面安装
- 图形界面安装

# 红帽5的默认文件系统
- EXT3

# 超级用户
- root

# 磁盘分区种类
- 主分区
- 逻辑分区
- 扩展分区

# 磁盘分区的表示方式
- 第一块IDE接口的硬盘称为/dev/hda，第一个分区称为/dev/hda1
- 第二块IDE接口的硬盘称为/dev/hdb，第三个分区称为/dev/hdb1
- 第一块SCSI接口的硬盘称为/dev/sda，第一个分区称为/dev/sda1
- 第一块SCSI接口的硬盘称为/dev/sdb，第五个分区称为/dev/sdb5

# 启动的引导步骤
- 加载BIOS
- 进入GRUB/LILO
- 加载Linux Kernel
- 执行init
- 运行 /etc/rc.d/rc.sysinit
- 执行 /etc/inittab
    - 0 --停机
    - 1 --单用户模式
    - 2 --多用户（没有NFS）
    - 3 --完全多用户模式（标准的运行级，文本字符界面）
    - 4 --保留
    - 5 --X窗口（GUI）
    - 6 --重新启动
- 执行默认级别中的所有Script
- 执行 /bin/login程序

# GRUB
启动引导

# 启动为文本模式
- Alt+Ctrl+F[1-6]

# 提示符
- #---root
- $---普通用户
- 注销 --logout

# shutdown命令
shutdown [- krhfc] [- t secs] time [warning message]

- -k ：告诉其他在线用户系统要进入维护模式，实际没有执行，仅警告
- -r ：reboot重新启动系统
- -h ：halt关闭系统并且关闭电源
- -f ：跳过fsck（检查文件系统并尝试修复错误），系统快速关机并重启
- -c ：作为另一个终端的root用户，利用该参数可以取消shutdown命令的执行
- -t secs ：系统执行shutdown的延迟时间，单位为分钟
- time ：为具体指定时间
- waring message ：向每个在线用户以广播的形式发送信息

# shell含义
shell是操作系统的外壳，为用户提供了使用操作系统的接口

# shell的种类
- Bourne Shell(sh)
- C-Shell(csh)
- Korn Shell(ksh)

# 简单命令
- pwd：显示当先工作的全路径
- date：显示当前系统日期时间
- who：显示当前登入系统的所有用户名
- cal [年份]：显示日历
- uname：查看当前操作系统信息
    - -r：显示发行版本号
    - -m：显示所用机器类型
    - -i：显示所需硬件平台
    - -v：显示操作系统版本
- wc [-lw] [-c]：统计给定文件的行数，字数和字符数
    - -l：统计行数
    - -w：统计字数
    - -c：统计字节数
- clear
    - 清屏

# history与重定向
history文件位置：~/bash_history

命令： history | more

>若要执行某个命令使用 ！[行数]

输出重定向符号
- `>` ：将输入的信息直接写入
输出重定向附加
- `>>`：将输入的信息以追加的方式写入
输入重定向
- `<`
错误重定向输出
- `2>`：把命令行出错的信息保存到指定的文件中去

# 管道操作符
管道线“|”可以集合命令，“|”前面的命令的输出是“|”后面命令的输入

# X window system与GNOME
X window System即图形化操作系统，GUI，非必须，只是个可选软件

GNOME即GNU网络对象模型环境，是一种让使用者容易操作和设定计算机环境的工具。

# 目录结构
- /
    - 根目录，位于linux文件系统目录结构的顶层
- /bin
    - 命令文件目录，包含了供系统管理员及普通用户使用的重要的linux命令的二进制（可执行）文件，包括shell解析器等，该目录不能包含子目录。
    目录、usr/bin存放了大部分用户命令
- /boot
    - 该目录中存放系统的内核文件和引导装载程序文件。例如红帽5的内核文件为vmlinuz-2.6.18-8.el5xen
- /dev
    - 设备（device）文件目录，存放连接到计算机上的设备的对应文件，包括字符设备和块设备等
- /etc
    - 存放系统大部分配置文件和子目录X window系统的文件保存在/etc/X11子目录中，与网络有关的配置文件保存在/etc/sysconfig子目录中
- /home
    - 包含系统上各个用户的主目录，子目录名称即为各用户名
- /lib
    - 存放各种编程语言库
- /lost+found
    - 在EXT2或EXT3文件系统中，当系统以外崩溃或者机器意外关闭所产生的的一些文件碎片放在这里
- /opt
    - 这个目录表示可选择的意思，有些软件包或者第三方软件会安装在这里。
- /root
    - 系统管理员ROOT的主目录
- /usr
    - 最大的目录，主要存放不经常变化的数据，以及系统下安装应用程序目录
- /mnt
    - 用来临时挂载文件系统，为某些目录提供默认挂载点，如光驱/mnt/cdrom
- /proc
    - 虚拟的文件系统，该目录中的文件是内存中的镜像
- /sbin
    - 保存系统管理员或者root用户的命令文件，/user/sbin存放了应用软件，/usr/local/sbin存放了通用的根用户权限的命令
- /tmp
    - 存放临时文件，一些命令和应用会用到这个目录
- /var
    - 通常保存经常变化的内容，如系统日志，邮件文件

# 文件操作命令，文件权限，链接
## 文件导航命令
- ls [-almRi] ：列目录
    - a：显示所有文件，包括隐藏
    - l：长格式显示文件详细信息
    - m：逗号分隔紧凑显示
    - R：递归显示所有
    - i：在输出的第一列显示文件的索引节点号(inode（index node）)
```
索引节点号

 系统中将目录下的文件名和文件inode号之间的映射作为目录的数据存放；人们通过文件名进行操作时，系统会通过对应路径目录的inode号找到目录的inode表数据，进而通过数据指针指向目录的数据，匹配文件名，得到文件的inode号；再到inode表中找到此文件的表项，再由文件数据指针指向真正的文件数据。

        i.  系统中同一分区的索引节点编号是唯一的，即在一个分区中，索引编号相同的文件指向的数据是同一个;（硬链接）

        ii.  系统中每个分区的索引节点划分是独立的，不同分区的索引节点编号可能相同，但不是同一个文件；

        iii.  分区中的索引节点编号是有限的；当分区中索引节点编号用完后，新建文件夹会提示系统内存不足，导致新建失败；但系统中仍有剩余磁盘空间，原因是索引节点编号不足，无法为文件分配节点编号，因而新建失败。
```

- cd [目录名] ：进目录
    - cd.. ：回到上一级
    - cd ：返回家目录

## 文件显示命令
- cat [-n] [文件名] ：读文件
    - n：编号显示
    - cat > [命名的新文件名]：利用输出重定向吧cat命令的屏幕输出信息写入一个新的文件中
    - cat [文件1] [文件2] > [新文件名]：合并文件

- more [文件名] ：分页读文件
    - 逐屏显示文件内容

## 文件复制，展出，移动命令
- cp [-fpr] [文件1] [文件2] ：复制
    - f ：如果文件2已存在，则这个命令覆盖内容时先不发出提示
    - p ：复制时保持原有的申城日期和inode编号
    - r ：递归

- mv [-f] [源目录] [目标目录] ：移动
    - mv [fil*] [目标目录]：将以fil开头的多个文件移动到目标目录下
    - -f：如果文件已存在，则这个命令覆盖内容时先不发出提示

- rm [-fr] [文件名] ：删除
    - f：不发出确认直接删除
    - r：递归删除

## 文件检索，排序
- grep [-in] [字符串] [文件] ：检索
    - i：忽略大小写区别
    - n：在显示符合的字符串之前，标出该行的行号

- sort [-ronk] [文件列表] ：排序
    - sort [文件] ：对文件1按每行第一个字符进行排序输出
    - sort [文件1] [文件2]：两个文件合起来进行排序并输出【
    - r：对文件按每行第一个字符进行反向排序输出
    - -r-o [outf] [file]：对文件按每行第一个字符进行反向排序,并把结果放在outf中
    - n：对文件按每行第一个字段进行数值排序输出
    - k [number] [file]：对文件按每行第[number]个字段进行排序输出
    - -n-k [number] [file]：对文件按每行第[number]个字段进行数值排序输出

# 目录操作命令
- mkdir [-pm] [目录名] ：建目录
    - p ：递归生成
    - m [777] [用户目录]：生成时修改权限

- rmdir [-p] [目录名] ：删除空目录
    - p：递归删除

# 文件的属主与属组
- chown [参数] [所有者]:[组] [文件列表]

# 文件的访问权限
```
-rwxrwxrwx
  7  7  7

4000 2000 1000
SUID GUID Sticky
```
- chmod [8进制数X3] [文件]

# 文件连接
- ln [选项] [源文件] [目标文件]

# 用户和组的配置文件
- /etc/passwd
    - 保存各用户的账户信息
```
用户名：口令：用户标志号（UID）：组标志号（GID）：注释描述：用户目录：命令解释器
```

- /etc/shadow
    - 保存各用户账户的密码等信息
```
用户名：口令：最后一次修改时间：最小时间间隔：最大时间间隔：警告时间：不活动时间：失效时间：标志
```

- /etc/group
    - 保存各用户账户的分组信息
```
组名：组口令：组标志号（GID）：组成员
```

- /etc/gshadow
    - 定义用户组口令，组管理员信息等
```
组名：组口令：组管理员账号：组成员
```

# 用户和组的管理命令
## 用户
- useradd [参数] [用户名]
    - d [home-dir]：设置用户的宿主目录
    - e [date]：设置账号的过期日期，例如2012-10-12
    - g [group-name]：设定用户所属的组名，默认自动创建用户名为组名的新组
    - s [shell-path]：设定用户登入所使用的Shell，默认为/bin/bash
    - u [uid]：设定用户的UID，唯一并大于499
    - D [username]：用于显示用户所使用的默认值

- usermod [参数] [用户名]：常用参数和useradd一样，仅列不同
    - l [newusername username]：改变用户名
    - L [username]：锁定指定账号
    - U [username]：解锁指定账号

- passwd [参数] [用户名]：设置密码
    - S [username]：用于查询指定用户口令(only root)
    - l [username]：用于锁定指定用户口令(only root)
    - u [username]：用于解锁指定用户口令(only root)
    - d [username]：用于删除指定用户口令(only root)

- userdel [参数] [用户名]：删用户
    - r ：删除用户所有相关文件

## 组
- gropadd [-r] [组名]
    - r ：建立系统组

- gropmod [-r] [组名]：和groupadd一样

- groupdel [组名] ：删除用户组

- gpasswd [参数] [用户名] [组名]
    - a [username] [groupname]：将指定用户添加到指定用户组
    - d [username] [groupname]：从组内删除用户名
    - A [username] [groupname]：设指定用户为指定组的管理员

# 软件包
常见软件包
- RPM包
- TAR包
- bz2包
- gz包
- deb包
- sh结尾的文件
- src源码文件
- bin文件

## RPM软件包管理
全称(Rad Hat Package Manager)，即软件包管理器。

基于GPL(General Public License)协议

优点：
- 快速安装
- 易于维护
- 查询验证功能强大
- 软件包升级时特别处理

功能：
- 安装
- 卸载
- 升级
- 查询
- 验证

## RPM命令
- rpm -ivh [包名]：安装命令
    - i(Install)：安装
    - v(Verify)：显示详细的安装信息
    - h(Horizontal)：显示水平进度条

- rpm -e [包名]：卸载命令
    - e(Erase)：删除

- rpm -qa ：查询系统中所有RPM软件包
- rpm -q  [RPM包名]：查询指定软件包是否安装
- rpm -qp [RPM包文件名]：查询包中文件信息，用于安装前了解
- rpm -qi [RPM包名]：查询系统中已安装包的描述信息
- rpm -ql [RPM包名]：查询系统中已安装包里所包含的文件
- rpm -qf [文件名]：查询系统中指定文件所属的软件包

- rpm -Uvh [RPM包名]：升级命令
    - U
    - v(Verify)：显示详细的安装信息
    - h(Horizontal)：显示水平进度条

- rpm -V [参数]：验证命令

## TAR包命令
- tar cvf [TAR包名] [文件名或目录名]：压包
    - c(Creat)：建立tar包
    - v(Verify)：执行命令时有更多提示信息
    - f(File)：TAR包文件名

- tar zcvf [TAR包名] [文件名或目录名]：压包
    - z(gzip)：使用gzip压缩

- tar ztf [TAR包名]：查询包
    - z(gzip)：使用gzip压缩的包
    - t(Test)：查询TAR包
    - f(file)：文件名

- tar zxvf [TAR包名]：解压包

## src源代码包的编译与安装
- 释放TAR包
- 查看Install软件与Readme文件
- 通常运行./configure命令设置编译器，并确定相关参数
- 执行./configure后会产生用于编译的MakeFile，这时运行make命令进行编译
- 执行make install 命令，将会把编译产生的可执行文件复制到正确的位置，一般会被安装到"/usr/local/bin"下
- 清除临时安装文件，命令为make clean

# 网络配置
## 网络配置文件
- /etc/sysconfig/network-scripts/ifcfg-eth0
    - 系统启动时初始化网络的信息
- /etc/sysconfig/network
    - 包含了主机最基本的网络信息，用于系统启动
- /etc/xinetd.conf
    - 定义了由超级进程xinted启动的网络服务
- /etc/hosts
    - 完成主机名映射为IP地址的功能
- /etc/host.conf
    - 配置域名服务客户端的控制文件
- /etc/resolv.conf
    - 配置域名服务客户端的IP地址
- /etc/protocols
    - 设定主机使用的协议以及各个协议的协议号
- /etc/services
    - 设定主机的不同端口的网络服务

## 常用网络管理命令
- hostname：显示当前系统的主机名
- hostname [主机名]：设置系统主机名(only root)

- ifconfig [网卡名]：显示当前活动的（或指定的）网卡设置
- ifconfig [网卡设备名] [IP地址]：设置网卡IP地址
- ifconfig [网卡设备名]:n [IP]：设置虚拟IP
    - n为制定网卡的编号
- ifconfig [网卡设备名] [up|down]：激活或停止指定网卡

- ping [- c 报文叔] [目的主机地址]

## 常用网络通信命令
- write [username] [tty]：实时给其他用户发送消息
    - tty ：终端号
    >可以用who命令查看所有用户

- wall [message]：广播向所有用户以文件形式发消息

- mesg [y|n]：设置消息的禁止和允许

- talk [username] [tty]：以全双工的方式实时和某用户交流

- mail [username]：发送邮件
- mail -s [标题(topic)] [username] < [filename]
- mail：查看所有邮件

# crontab定时执行任务

- crontab -e : 执行文字编辑器来设定时程表，内定的文字编辑器是 VI，如果你想用别的文字编辑器，则请先设定 VISUAL 环境变数 
来指定使用那个文字编辑器(比如说 setenv VISUAL joe) 
- crontab -r : 删除目前的时程表 
- crontab -l : 列出目前的时程表 
- crontab file [-u user]: 用指定的文件替代目前的crontab。

```
时程表的格式如下 : 
f1 f2 f3 f4 f5 program
```
其中 f1 是表示分钟，f2 表示小时，f3 表示一个月份中的第几日，f4 表示月份，f5 表示一个星期中的第几天。program 表示要执行的程序

当 f1 为 * 时表示每分钟都要执行 program，f2 为 * 时表示每小时都要执行程序，以此类推

当 f1 为 a-b 时表示从第 a 分钟到第 b 分钟这段时间内要执行，f2 为 a-b 时表示从第 a 到第 b 小时都要执行，以此类推

当 f1 为 */n 时表示每 n 分钟个时间间隔执行一次，f2 为 */n 表示每 n 小时个时间间隔执行一次，其馀类推

当 f1 为 a, b, c,... 时表示第 a, b, c,... 分钟要执行，f2 为 a, b, c,... 时表示第 a, b, c...个小时要执行，以此类推


使用者也可以将所有的设定先存放在档案 file 中，用 crontab file 的方式来设定时程表。
```
基本格式 : 
*　　*　　*　　*　　*　　command 
分 　时　 日　 月　 周　 命令 
第1列表示分钟1～59 每分钟用*或者 */1表示 
第2列表示小时1～23（0表示0点） 
第3列表示日期1～31 
第4列表示月份1～12 
第5列标识号星期0～6（0表示星期天） 
第6列要运行的命令 

```

```
例：
1、每天早上7点执行一次 /bin/ls : 
0 7 * * * /bin/ls 

2、在 12 月内, 每天的早上 6 点到 12 点中，每隔3个小时执行一次 /usr/bin/backup : 
0  6-12  */3  12  * /usr/bin/backup 

3、周一到周五每天下午 5:00 寄一封信给 alex@domain.name : 
0 17 * * 1-5 mail -s "hi" alex@domain.name < /tmp/maildata 

4、每月每天的午夜 0 点 20 分, 2 点 20 分, 4 点 20 分....执行 echo "haha" 
20 0-23/2 * * * echo "haha" 

5、每天早上6点10分 
10 6 * * * date 

6、每两个小时 
0 */2 * * * date 

7、晚上11点到早上8点之间每两个小时，早上8点 
0 23-7/2，8 * * * date 

8、每个月的4号和每个礼拜的礼拜一到礼拜三的早上11点 
0 11 4 * mon-wed date 

9、1月份日早上4点 
0 4 1 jan * date

10、每天早上6点输出'Good morning' 到 /tmp/test.txt 文本
0 6 * * * echo "Good morning." >> /tmp/test.txt 

注意单纯echo，从屏幕上看不到任何输出，因为cron把任何输出都/tmp/test.txt 上

```

# init进程，系统运行级别
- /etc/inittab 
    - 系统启动配置文件
- init [0~6]：切换运行级别
    - 0：停机，不要把系统默认运行级别设置为0，否则将不能正常启动。
    - 1：单用户模式，用于root对系统进行维护，其他用户不能使用
    - 2：多用户模式，无NFS
    - 3：完全多用户模式，通常主机都为该模式
    - 4：保留，未分配使用
    - 5：图形登入的多用户模式
    - 6：重启，不要把系统默认运行级别设置为6，否则将不能正常启动。

- runlevel：显示系统当前和上一次的运行级别，如果系统不存在上一次的运行级别则用N代替

- chkconfig --list[服务名]：查看服务的启动状态
- chkconfig [--level<levels>] [服务名] [on|off]：设置系统服务的启动状态

- services [服务名] [status|start|stop|restart]：服务状态控制

- ntsysv：设置系统自启动服务

# linux文件系统类型
- ext2/ext3
- swap
- vfat
- NFS
- ISO 9660
- 日志文件系统
- proc

# 磁盘文件系统的挂载与卸载
- mount [-t fs-type] [-o option] [device mountpoint]：挂载文件

- umount [device] [dir]：解除挂载

# vi编辑器
## 存盘及退出
命令模式下
- :w <回车> ：保存
- :w [filename] <回车>：另存为
- :q <回车>：退出
- :wq <回车>：存盘后退出
- :q！<回车>：无条件退出，不保存

## 命令模式
- 命令模式
- 底行命令模式
- 输入模式

## 删除命令
### 命令模式下
- [number]x，[number]X
    - 小写向光标后删[number]个字符，大写向光标前面删

- [number]dd，D,d
    - dd ：删除一整行
    - D ：从光标位置删除到行尾
    - d ：配合光标移动

